# MQTT Web Dashboard

Это веб-интерфейс для работы с MQTT. Можно следить за топиками, подписываться на них и отправлять сообщения. Ниже разбор, как это работает и как пользоваться.

## Что это за проект?

Веб-приложение на FastAPI, которое подключается к MQTT-брокеру. Через браузер можно смотреть сообщения в топиках, подписываться на них и отправлять свои. Использует вебсокеты для обновления данных в реальном времени.

## Как установить?

Необходимо клонировать репозиторий:

```
git clone <ссылка на репо>
```

Необходимо перейти в папку проекта:

```
cd <название папки>
```

Необходимо установить зависимости:

```
pip install fastapi uvicorn paho-mqtt
```

Если установка не проходит, следует проверить версию Python. Работает на 3.9.

## Как запустить?

Необходимо запустить сервер:

```
python app.py
```

Или через uvicorn:

```
uvicorn app:app --reload
```

После этого необходимо открыть браузер и перейти на http://localhost:8000. Там будет страница для ввода данных подключения к MQTT-брокеру.

## Как это работает?

Основной файл `app.py` на FastAPI. Это сервер, который:
1. Запускает веб-страницу для подключения к MQTT.
2. Через вебсокеты принимает команды (подключение к брокеру, подписка на топик).
3. Отправляет обновления на страницу при новых сообщениях.

Класс `MQTTManager` отвечает за работу с MQTT: подключение к брокеру, подписка на топики, получение и отправка сообщений через вебсокеты. Фронтенд в `index.html` в папке `templates` - HTML с JavaScript для отображения данных.

Есть еще `mqqt_test.py` - тестовый клиент для MQTT. Использовался для проверки без веб-интерфейса. Можно отправлять и получать сообщения через консоль.

## Как пользоваться?

1. Необходимо запустить сервер, как указано выше.
2. Необходимо открыть http://localhost:8000.
3. Необходимо ввести данные брокера: адрес, порт, логин, пароль, client_id. Примеры есть в `mqqt_test.py`.
4. Необходимо нажать "Connect". Если данные верны, подключение будет установлено.
5. Далее можно подписываться на топики, просматривать данные или отправлять сообщения.

